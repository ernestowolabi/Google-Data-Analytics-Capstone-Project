---
title: 'Bellabeat Case Study - Google Data Analytics Capstone Project'
author: "Ernest Owolabi"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 1. About The Company
  Bellabeat, founded by Urška Sršen and Sando Mur, is a tech company known for its health-focused smart products designed with artistic flair. Since its establishment in 2013, Bellabeat has swiftly become a prominent wellness brand for women, offering insights into activity, sleep, stress, and reproductive health. By 2016, the company had expanded globally, offering its products through various online retailers and its e-commerce platform. Bellabeat prioritizes digital marketing, maintaining an active presence on platforms like Google, Facebook, Instagram, and Twitter, alongside running targeted video and display ads.

# 2. Scenario
  Bellabeat, though successful as a small company, aims to expand its presence in the global smart device market. Urška Sršen, co-founder and Chief Creative Officer, sees potential in analyzing smart device fitness data to drive growth. As part of this initiative, I've been tasked with analyzing consumer usage data for one of Bellabeat's products. The insights gained will inform the company's marketing strategy. My analysis and recommendations will be presented to the Bellabeat executive team for strategic decision-making.

# 3. Business Task
* Conducting market analysis and identifying growth opportunities in the global smart device market.
* Analyzing smart device fitness data to understand consumer behavior and usage patterns.
* Presenting findings and insights to the Bellabeat executive team.
* Formulating high-level recommendations for Bellabeat's marketing strategy based on the analysis.
* Collaborating with the marketing team to implement the recommended strategies.
* Monitoring and evaluating the effectiveness of the marketing strategies implemented.
* Iterating and refining marketing approaches based on ongoing analysis and feedback.

I will follow these steps of the data analysis process: __ask, prepare, process, analyze, share, and act__.

# 4. Ask
  Sršen asks me to analyze smart device usage data in order to gain insight into how consumers use non-Bellabeat smart devices. She then wants me to select one Bellabeat product to apply these insights to in my presentation. 

These questions will guide my analysis:

* What are some trends in smart device usage?
* How could these trends apply to Bellabeat customers?
* How could these trends help influence Bellabeat marketing strategy?

I will produce a report with the following deliverables:

* A clear summary of the business task
* A description of all data sources used
* Documentation of any cleaning or manipulation of data
* A summary of my analysis
* Supporting visualizations and key findings
* My top high-level content recommendations based on my analysis

# 5. Prepare
Sršen encouraged me to use public data that explores smart device users’ daily habits. She points to a specific data set: __FitBit Fitness Tracker Data__ (CC0: Public Domain, dataset made available through Mobius): This Kaggle data set contains personal fitness tracker from thirty fitbit users. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. It includes information about daily activity, steps, and heart rate that can be used to explore users’ habits. Sršen tells me that this data set might have some limitations, and encourages me to consider adding another data to help address those limitations as i begin to work more with this data.

### 5.1 Information about the Dataset
* Generated by respondents from a survey via Amazon Mechanical Turk between 12 March 2016 to 12 May 2016.
* 30 FitBit users consented to the submission of personal tracker data.
* Data collected incldes physical activity recorded in minutes, heart rate, sleep monitoring, daily activity and steps.

### 5.2 Limitations
* Data is collected 7 years ago in 2016. Users daily activity, fitness and sleeping patterns, and diets may have changed since then. Data may not be timely or relevant.
* Sample size of 30 Fitbit users us not representative of the entire fitness population.
* Data is collected in survey, so intergrity can't be ascertained.

# 6. Process and Analyse
I chose __R__ as my tool for analysis because its very convenient to clean, analyse and visualise my data, all in one place.

### 6.1 Install and Load the Packages
```{r}
library(tidyverse)
library(lubridate)
```
### 6.2 Loading the dataframes
```{r}
daily_activity <- read_csv("Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
sleep_day <- read_csv("Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
heartrate_seconds <- read_csv("Fitabase Data 4.12.16-5.12.16/heartrate_seconds_merged.csv")
weight <- read_csv("Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
```
#### 6.2.1 Exploring the loaded dataframes
```{r}
head(daily_activity)
head(sleep_day)
head(weight)
head(heartrate_seconds)
colnames(daily_activity)
colnames(sleep_day)
colnames(weight)
colnames(heartrate_seconds)
str(daily_activity)
str(sleep_day)
str(weight)
str(heartrate_seconds)
```
#### 6.2.2 To see distinct participants in all the data frames
```{r}
n_distinct(daily_activity$Id)
n_distinct(sleep_day$Id)
n_distinct(weight$Id)
n_distinct(heartrate_seconds$Id)
```
#### 6.2.3 Check for duplicates
```{r}
sum(duplicated(daily_activity))
sum(duplicated(sleep_day))
sum(duplicated(weight))
sum(duplicated(heartrate_seconds))
```
###### 6.2.3.1 Remove duplicates
```{r}
sleep_day_2 <- sleep_day %>% 
  distinct() 
sum(duplicated(sleep_day_2))
```
### 6.3 Summarise data to get insights
```{r}
daily_activity %>% 
  select(TotalSteps,TotalDistance,SedentaryMinutes,Calories) %>%
  summary()
daily_activity %>% 
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes) %>% 
  summary()
sleep_day_2 %>% 
  select(TotalSleepRecords,TotalMinutesAsleep,TotalTimeInBed) %>% 
  summary()
heartrate_seconds %>% 
  select(Value) %>% 
  summary()
weight %>% 
  select(WeightKg,BMI) %>% 
  summary()
```
#### 6.3.1 Daily Activity Insights
__Steps__: The summary shows that the average steps per day is 7638 steps.

__Sedentary Minutes__: Participants have an average of 991 sedentary minutes.

__Sleep__: Participants slept for an average of 419 minutes and stayed in bed for 458 minutes.

__Calories__: The average calories burned per day is 2304.

__Active__: More participants are lightly active.

__Heart Rate__: Participants have an average of 77bpm.

__Weight__: Users have an average weight of 72kg and average BMI of 25.19.

### 6.4 Merging Dataframes

#### 6.4.1 Change Date Format
To merge Dataframes,I have to ensure consistency of the date columns between the daily_activity and sleep_day dataframes. First of all, I renamed all date formats to be consistent across all dataframes, then I trimmed to remove leading and trailing spaces.
```{r}
daily_activity2 <- daily_activity %>% 
  mutate(ActivityDate=trimws(ActivityDate)) %>% 
  rename(Date=ActivityDate)
sleep_day_3 <- sleep_day_2 %>% 
  mutate(SleepDay=trimws(SleepDay)) %>% 
  rename(Date=SleepDay)
heartrate_seconds2 <- heartrate_seconds %>%
  mutate(Time=trimws(Time)) %>% 
  rename(Date=Time)
weight2 <- weight %>% 
  mutate(Date=trimws(Date))
```
#### 6.4.2 Now to convert to date format
First convert the daily activity dataframe
```{r}
daily_activity_cleaned <- daily_activity2 %>% 
  mutate(Date=as_date(Date,format="%m/%d/%Y"))
str(daily_activity_cleaned)
View(daily_activity_cleaned)
```
Now to convert the sleep dataframe

```{r}
sleep_day_cleaned <- sleep_day_3 %>% 
  mutate(Date=as.Date(Date,format="%m/%d/%Y %I:%M:%S %p"))
View(sleep_day_cleaned)
str(sleep_day_cleaned)
```
Then the weight dataframes
These conversions are necessary because im going to merge these data frames.

```{r}
weight_cleaned <- weight2 %>% 
  mutate(Date=as.Date(Date,format="%m/%d/%Y %I:%M:%S %p"))
View(weight_cleaned)
str(weight_cleaned)
```
#### 6.4.3 Now to merge dataframes
I merged the activity and sleep data frames together in order to analyse the relationship between them and get insights.

```{r}
daily_merged_data <- merge(sleep_day_cleaned, daily_activity_cleaned, by=c('Id','Date'))
head(daily_merged_data)
View(daily_merged_data)
```
Then I proceeded to merge the daily activity and weight dataframes

```{r}
daily_activity_weight <- merge(weight_cleaned, daily_activity_cleaned, by=c('Id','Date'))
head(daily_activity_weight)
View(daily_activity_weight)
```

### 6.5 Visualizations

#### 6.5.1 Visualise the relationship between Steps taken and Calories expended
I wanted to know if there was a correlation between steps taken and calories expended I created a scatterplot to show this relationship.

```{r}
ggplot(data=daily_merged_data, aes(x=TotalSteps, y=Calories)) + 
  geom_point() + geom_smooth() + labs(title="Total Steps vs Calories expended")
```

###### 6.5.1.1 Insights
A clear positive correlation emerges between the number of steps taken and the calories expended. This suggests that the greater the number of steps walked, the higher the potential calorie burned.

#### 6.5.2 Visualisation of Daily steps and sleep
To see the relationship between daily steps and sleep, I created another scatterplot.

```{r}
ggplot(data=daily_merged_data, aes(x=TotalSteps, y=TotalMinutesAsleep)) + 
  geom_point() + geom_smooth() + labs(title="Total Steps vs Total Minutes Asleep")
```

###### 6.5.2.1 Insights
Here, it appears that there is no discernible correlation between the total number of steps taken and the total minutes asleep.

#### 6.5.3 Visualisation of Distance and Total Calories expended
```{r}
ggplot(daily_merged_data, aes(x=TotalDistance,y= Calories))+
  geom_point() +
  geom_smooth(col='pink') +
  labs(title="Total Distance vs Calories expended")
```

###### 6.5.3.1 Insights
A positive correlation between distance covered and total calories burned is evident from the plotted data.

#### 6.5.4 Use of smart device
To get the daily usage of the smart device, I will use the group by and summarise function to count distinct users and how often they used the device. Grouping into "low use", "moderate use" and "high use".
```{r}
daily_use <- daily_merged_data %>%
  group_by(Id) %>%
  summarize(days_used=sum(n())) %>%
  mutate(usage = case_when(
    days_used >= 1 & days_used <= 10 ~ "low use",
    days_used >= 11 & days_used <= 20 ~ "moderate use", 
    days_used >= 21 & days_used <= 31 ~ "high use", 
  ))
View(daily_use)
n_distinct(daily_merged_data$Id)
```
Visualization of smart device usage data.

```{r}
ggplot(data=daily_use)+
  geom_bar(mapping=aes(x=usage, fill=usage))+
  labs(title="Smart Device Usage")
```

###### 6.5.4.1 Insights
Analyzing our data, we can see that most participants use the smart device even though there's also significant amount of participants who don't use the device.

#### 6.5.5 Visualisation of BMI against steps taken
```{r}
ggplot(data = daily_activity_weight, aes(x = TotalSteps, y = BMI)) +
  geom_point() +
  geom_smooth(col = 'pink')+
  labs(title="Total steps vs BMI")
```

Visualization of BMI against calories expended.

```{r}
ggplot(data = daily_activity_weight, aes(x = Calories, y = BMI)) +
  geom_point() +
  geom_smooth(col = 'pink')+
  labs(title="Calories expended vs BMI")
```

###### 6.5.5.1 Insights
Both plots above show that users with lower BMI take more steps and burn more calories

#### 6.5.6 Visualization for Most active day of the week
First I will extract the days of the week from the date then proceed to analyze.
```{r}
Day <- daily_activity_cleaned %>%
  mutate(DayOfWeek = weekdays(Date))
View(Day)
```

Convert 'DayOfWeek' column into a factor with custom levels specifying the order of days of the week
```{r}
Day$DayOfWeek <- factor(Day$DayOfWeek, levels = c("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"))
```
Sort the data frame by the 'DayOfWeek' column

```{r}
Day <- Day[order(Day$DayOfWeek), ]
View(Day)
```
Visualization of most active weekdays
```{r}
ggplot(data=Day,)+
  geom_bar(mapping=aes(x=DayOfWeek, fill=DayOfWeek))+
  labs(title="Activity Grouped by Weekday")
```

###### 6.5.6.1 Insights
Peak user engagement is observed mid-week, particularly on Tuesday and Wednesday, in terms of the number of times users utilized the app per day. Conversely, Sunday and Monday demonstrates the lowest engagement, suggesting potential opportunities to enhance user activity on these days.

# 7. Findings
__Average Steps per Day__: Participants take an average of 7638 steps daily, indicating their level of physical activity.

__Sedentary Behavior__: On average, participants spend 991 minutes in sedentary activities, highlighting potential areas for improvement in physical activity levels.

__Sleep Duration__: Participants sleep for an average of 419 minutes and stay in bed for 458 minutes, suggesting a relatively consistent sleep pattern.

__Calories Burned__: The average daily calorie expenditure is 2304, which provides insight into participants' energy expenditure.

__Activity Level__: More participants are lightly active, indicating the predominant activity intensity level among users.

__Heart Rate__: The average heart rate among users is 77 beats per minute (bpm), which may serve as a reference for assessing cardiovascular health.

__Weight and BMI__: Users have an average weight of 72kg and an average BMI of 25.19, indicating the distribution of body weight among participants.

__In addition to these,__

__Correlation between Steps and Calories__: There is a clear positive correlation between the number of steps taken and the calories expended. This suggests that as the number of steps walked increases, there is a corresponding increase in potential calories burned.

__Steps Taken and Sleep Duration__: Interestingly, there seems to be no discernible correlation between the total number of steps taken and the total minutes asleep, indicating that physical activity may not directly affect sleep duration among participants.

__Device Usage__: It's noteworthy that while most participants use the smart device, there is also a significant proportion who don't use it, suggesting potential areas for increasing user engagement or addressing barriers to adoption.

__BMI and Activity__: Both plots reveal that users with lower BMI tend to take more steps and burn more calories, indicating a potential relationship between BMI and physical activity levels.

__User Engagement Trends__: Peak user engagement is observed mid-week, particularly on Tuesday and Wednesday, in terms of the number of times users utilize the app per day. Conversely, Sunday and Monday demonstrate the lowest engagement, indicating potential opportunities to enhance user activity on these days.

# 8. Recommendations
Based on the insights gathered from the analysis, here are some recommendations for Bellabeat: 

__Encourage Physical Activity__: Develop features in smart devices and the app to promote physical activity, such as reminders, personalized goals, and guided workouts.

__Improve Sleep Quality__: Provide insights and tips within the app to enhance sleep quality, including tracking sleep patterns and offering relaxation techniques.

__Enhance Calorie Management__: Offer tools for better calorie intake and expenditure management, like tracking, meal planning, and nutritional information.

__Promote Heart Health__: Utilize average heart rate data to provide insights into cardiovascular health and offer guidance on maintaining a healthy heart rate.

__Tailor Marketing Strategies__: Customize marketing campaigns based on BMI categories, focusing on promoting activity and healthy choices tailored to different user demographics.

__Enhance User Engagement__: Implement strategies to increase engagement, particularly on low-activity days like Sundays and Mondays, through incentives, new features, and community support.

__Additionally__:

* Implement personalized activity goals to motivate users and manage calorie expenditure effectively. 
* Provide educational content on sleep hygiene and integrate features to support healthy sleep habits. 
* Conduct user surveys to understand barriers to device usage and address them through improved onboarding and user experience. 
* Develop fitness programs tailored to different BMI levels and incentivize user engagement through rewards. 
* Strategically schedule app updates and promotions to align with peak engagement periods and boost user activity and retention.

By incorporating these recommendations, Bellabeat can empower users to lead healthier lives and solidify its position as a leader in smart wellness solutions.